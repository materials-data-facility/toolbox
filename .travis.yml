language: python
python:
- '3.6'
- '3.7'
- '3.8'
install:
- pip install --upgrade pip
- pip install -e .
- pip install -r test_requirements.txt
env:
  matrix:
  - TEST_ENV=travis
  global:
    secure: iDC1z+t4xhD5wk3runujsM/m9pAYpXMZb+/ufAOL4GxtXCu2Vv2tDV9SCGiQXTd8ogJYeF87wnmDNgfouBar2mPRZ8UsSKpLmjf0hniUVfBHZp9osu0y89frKNEfQ4Z3lcaG3nyRV+A9zS7hNxNh7xTGx1FE9WvGtV4BiPnG+DLAWNIAlbINYEc2ogspEG0pPOT0IpgemslzV5gRxrT0mPgCB5w2rZZnBu+Mqc7+9Q6n7kAl+naqFLZ3obpkg7KEjSbMwFso6NxQZfzSiRKG6MpOWVbfSArOMNT/rXlp+HReCbMPA8xCP7j5WrZHmzyItz1dlhrHtdpyw+QbwMCNs5ar37F3C9YdssCpuofojDr4VjcNksJtC8EgmOuohzQ8XG52PnWJY8/AW48NdfYMM+hoqBDdOwGSrJj2wocW9NLP9E00lI2fC0UmW/1Q+tJqcd5zIlNbXM4mLt5+itx+AGmxHm3k1kB6/p42FwoQNtoWXzkx0pHh9VfJ9dovGjjtZtjiN0aSTwRQocH7zgVrymytoaYRZXqvAyyPWBwi1BkUOhpEcj5WV6cIBZri0Etar17pYqGGPlU1BzJ7YkfqK+MGu41dxRAmDJO0hKk970slt16E9mRB8BSJPKwY3Ji+odn/wS6DaqOi/Uth2Zzw0RXezS3RkKDa3KuK4DCODhs=
script:
- flake8 . && travis_wait 50 py.test
before_install:
- openssl aes-256-cbc -K $encrypted_a7c8f759f73f_key -iv $encrypted_a7c8f759f73f_iv
  -in travis.tar.enc -out travis.tar -d
- openssl aes-256-cbc -K $encrypted_ad73325f33e8_key -iv $encrypted_ad73325f33e8_iv
  -in travis.tar.enc -out travis.tar -d
- tar xvf travis.tar
- mv .globus-native-apps.cfg ~/.globus-native-apps.cfg
- mv .client_credentials.json ~/.client_credentials.json
after_success:
- coveralls
notifications:
  email:
    recipients:
    - blaiszik@uchicago.edu
    on_success: never
    on_failure: always
  slack:
    on_success: always
    on_failure: always
    rooms:
      secure: PeTw4hgPe/UvQXjmYD7tT+4J1tOZKOHw5sLYegSZtnekKeLpjLZib0eZrAkzE5LFbRoRgXZ9z4Yn+hN3az4Z1GodXYcRrYrvRwe75oZMgxe5TvXpmE1lqv8nCvbDo2LJbkVTdn0fKRRfEl1W62RtYcyh+QwunUudHA9U2zOZLqSt4BeYMTOK4T5XyhZ5T1DYSBO8Dj28OFuemjwGkBMgZ5Z/+GqIJ1wZw2sKHKN+vkKj8NChPEzok+GX0R1CXgqvMMHPNJUx/69hZMuqxZciQICqhAstUw//ssTI6bzGHivbhObE5nlDqmBIPDD8tEG6p/XOOFtHx2a/R6KV+5wjzIs6sLiEz2QAG/qKm20jSHi8j585RqjgpBGC1g0FQ8k75E0oF8ls5unHFnDHPRWnPI0ifZ2qgYIUWdHC6dV4QF06Z1OYRHfOiyiLvuWIlKufKRM6aC84LEXxBS7Lq4MUZ+wKjGVf5EmSeJzYC+NXnBcnkFOx3KnImNDP9JuBwsgrFYRZhpvlwKdmCn1sw+iAuhco+nTKrzq5fK4vglE4zAMr81YgnLrVY3xJrz0G4wbQYvtxcFx84GaV6UiL1hfbuu4aBw3o6kuq5gxEaYg18MvsIZyIbQOpNuqRtQsHknRJSoLPvIEv8Rq6zA2twHI1MJXunjzsc0WaCm2Npt1ZpGk=
deploy:
  provider: pypi
  user: __token__
  on:
    tags: true
  distributions: sdist bdist_wheel
  password:
    secure: tuNKyBhjlug42Pn8zpznej3pnOyA6LrLvnbr9KM3RKbZMd+0jK4wPrC/kxllncEMVnBzDL1qdtKkw+akcN+W/PPHg7dRrdnLPlFjEiwW1AJGX9e3QQ7xa7ujJlogxl48qsRDHHxvQUN/6L74yTuYA+vRzMgVpoSmdX3EMwYItVTKADJ0g6Cfq3PHY9wkukODFkYJIOs8iFXhB+wQNDGIu5fPzdVlK/7KLqBWunFTn8b3czWIOWIq5UiX1GMmHeMaptv3Zqcr1Gdp7ey+VHRPlL47wnc++wXkzxjcIlp3oDoWCOTFcwPn/xRCztfgY1S8CgCexV63nt5vfq5efbAJ2ilghC2+AE2FX2gO5YiCXOyhh8MLAs5j1z2jcJJ04iKIATmBaKixK6HFGHwTnzxyvtOb7Q2xeijF4Ax+kRyqtbhSlLezeb0mhCp8E1oxFVCd0700/82N1XpITJhAJ+OBZU/5eLIC2S+31mCKKStOUAZA7GFXpfsExwvv1a5jfvjWatkJG5M9ZfIJbx6VvpD5nXlDAf9TYyyw5gEYKrof6QDMUveMIvvScD4C1xp/3jVQmv7iPaz/Ko7JURykGI1VryzGw3j6oBA8ErKz4Bgex5viJiXT3FvjfR0MCp/dZcQpaHgsacvsdOnvvGpvmjew/rD5wAM2aqea/I1as3LZaOA=
